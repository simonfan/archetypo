//     archetypo
//     (c) simonfan
//     archetypo is licensed under the MIT terms.

define("__archetypo/view/sub-views",["require","exports","module","lodash","jquery"],function(t,e,i){var r=t("lodash"),n=t("jquery");i.exports=function(t,e){var i=e.find("[data-arch-view]");r.each(i,r.bind(function(e){var i=n(e),r=i.data(),s=t.constructor("view",r.archView);r.el=i,r.app=t,s(r)},this))}}),define("__archetypo/view/index",["require","exports","module","lodash","dockable-view","./sub-views"],function(t,e,i){{var r=t("lodash"),n=t("dockable-view"),s=t("./sub-views");i.exports=n.extend(function(t){this.$el=r.isObject(t.$el)?t.$el:r.isObject(t.el)?t.el:$("<div></div>");var e=t.html||this.html;e&&this.$el.html(e);var i=t.app||this.app;s(i,this.$el);var o=this.$el.data("arch-id")||this.$el.prop("id")||this.cid;i.view(o,this),n.prototype.initialize.apply(this,arguments)})}}),define("__archetypo/router/index",["require","exports","module","lodash","lowercase-backbone"],function(t,e,i){{var r=t("lodash"),n=t("lowercase-backbone").router;i.exports=n.extend({initialize:function(t){t=t||{},this.stringifiers=r.extend({},this.stringifiers,t.stringifiers)},stringifiers:{"default":function(t){return"/"+JSON.stringify(t)}},stringifier:function(t,e){return this.stringifiers[t]=e,this},stringify:function(t,e){var i=this.stringifiers[t]||this.stringifiers["default"];return i(e)},navigate:function(t,e,i){var r=this.stringify(t,e);return n.prototype.navigate.call(this,r,i)}})}}),define("archetypo",["require","exports","module","subject","lowercase-backbone","q","./__archetypo/view/index","./__archetypo/router/index"],function(t,e,i){var r=(t("subject"),t("lowercase-backbone")),n=(t("q"),t("./__archetypo/view/index")),s=t("./__archetypo/router/index"),o=i.exports=s.extend(function(){s.prototype.initialize.apply(this,arguments),this.constructors={view:{"default":n},model:{},collection:{}},this.instances={view:{},model:{},collection:{}}});o.proto({constructor:function(t,e,i){var r=this.constructors[t],n=r[e]||r["default"];return 3===arguments.length?(i.app=this,r[e]=n.extend(i)):2===arguments.length?n:void 0},instance:function(t,e,i){var r=this.instances[t]=this.instances[t]||{};return 3===arguments.length&&(r[e]=i),r[e]},build:function(t){var e=this.constructor("view","default");return e({$el:t,app:this}),this},start:function(t){return r.history.start(t),this}}),o.proto({view:_.partial(o.prototype.instance,"view"),model:_.partial(o.prototype.instance,"model"),collection:_.partial(o.prototype.instance,"collection")})});