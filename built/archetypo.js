//     archetypo
//     (c) simonfan
//     archetypo is licensed under the MIT terms.

define("__archetypo/view/sub-views",["require","exports","module","lodash","jquery"],function(e,t,i){var o=e("lodash"),r=e("jquery");i.exports=function(e,t){var i=t.find("[data-arch-view]");o.each(i,o.bind(function(t){var i=r(t),o=i.data(),n=e.constructor("view",o.archView);o.el=i,o.app=e,n(o)},this))}}),define("__archetypo/view/index",["require","exports","module","lodash","dockable-view","./sub-views"],function(e,t,i){{var o=e("lodash"),r=e("dockable-view"),n=e("./sub-views");i.exports=r.extend(function(e){this.$el=o.isObject(e.$el)?e.$el:o.isObject(e.el)?e.el:$("<div></div>");var t=e.html||this.html;t&&this.$el.html(t);var i=e.app||this.app;n(i,this.$el);var s=this.$el.data("arch-id")||this.$el.prop("id")||this.cid;i.view(s,this),r.prototype.initialize.apply(this,arguments)})}}),define("archetypo",["require","exports","module","subject","lowercase-backbone","q","./__archetypo/view/index"],function(e,t,i){var o=(e("subject"),e("lowercase-backbone")),r=(e("q"),e("./__archetypo/view/index")),n=i.exports=o.router.extend(function(){this.constructors={view:{"default":r},model:{},collection:{}},this.instances={view:{},model:{},collection:{}}});n.proto({constructor:function(e,t,i){var o=this.constructors[e],r=o[t]||o["default"];return 3===arguments.length?(i.app=this,o[t]=r.extend(i)):2===arguments.length?r:void 0},instance:function(e,t,i){var o=this.instances[e]=this.instances[e]||{};return 3===arguments.length&&(o[t]=i),o[t]},build:function(e){var t=this.constructor("view","default");return t({$el:e,app:this}),this},start:function(e){return o.history.start(e),this}}),n.proto({view:_.partial(n.prototype.instance,"view"),model:_.partial(n.prototype.instance,"model"),collection:_.partial(n.prototype.instance,"collection")})});