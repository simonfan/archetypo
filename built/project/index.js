//     archetypo
//     (c) simonfan
//     archetypo is licensed under the MIT terms.

define(["require","exports","module","subject","lowercase-backbone","q","./__archetypo/view/index","./__archetypo/router/index"],function(e,t,n){var r=e("subject"),i=e("lowercase-backbone"),s=e("q"),o=e("./__archetypo/view/index"),u=e("./__archetypo/router/index"),a=n.exports=u.extend(function(){u.prototype.initialize.apply(this,arguments),this.constructors={view:{"default":o},model:{},collection:{}},this.instances={view:{},model:{},collection:{}}});a.proto({constructor:function(t,n,r){var i=this.constructors[t],s=i[n]||i["default"];if(arguments.length===3)return r.app=this,i[n]=s.extend(r);if(arguments.length===2)return s},instance:function(t,n,r){var i=this.instances[t]=this.instances[t]||{};return arguments.length===3&&(i[n]=r),i[n]},build:function(t){var n=this.constructor("view","default");return n({$el:t,app:this}),this},start:function(t){return i.history.start(t),this}}),a.proto({view:_.partial(a.prototype.instance,"view"),model:_.partial(a.prototype.instance,"model"),collection:_.partial(a.prototype.instance,"collection")})});